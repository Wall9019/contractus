<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Assistente Jurídico de Contratos Sociais</title>

    <!-- Tailwind CSS (CDN) -->
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@3.2.7/dist/tailwind.min.css"
      rel="stylesheet"
    />

    <!-- PDF.js (CDN) -->
    <script
      src="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.13.216/build/pdf.js"
      defer
    ></script>

    <!-- Mammoth.js local (incluso neste projeto) -->
    <script src="./mammoth.min.js" defer></script>

    <!-- PDF.js Worker local (pdf-worker.js) -->
    <script src="./pdf-worker.js" defer></script>

    <script>
      // Aponta o worker do PDF.js para o arquivo local
      window.addEventListener('DOMContentLoaded', () => {
        pdfjsLib.GlobalWorkerOptions.workerSrc = './pdf-worker.js';
      });
    </script>
  </head>

  <body class="bg-gray-100 text-gray-900">
    <!-- Cabeçalho -->
    <header class="bg-white shadow p-6 text-center">
      <h1 class="text-2xl font-bold">Assistente Jurídico de Contratos Sociais</h1>
      <p class="text-gray-600 mt-2">
        Análise automatizada de contratos (PDF/Word) usando ChatGPT
      </p>
    </header>

    <!-- Conteúdo Principal -->
    <main class="container mx-auto p-4">

      <!-- Seção de Botões Iniciais -->
      <section id="home-section" class="my-8">
        <div class="flex flex-col items-center gap-4">
          <!-- Botão para Upload de Documento -->
          <label
            for="fileInput"
            class="px-4 py-2 bg-blue-600 text-white rounded cursor-pointer hover:bg-blue-700"
          >
            Carregar Documento (PDF/Word)
          </label>
          <input
            id="fileInput"
            type="file"
            accept=".pdf,.doc,.docx"
            class="hidden"
          />

          <!-- Botão para Inserir Texto Manualmente -->
          <button
            id="manualButton"
            class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
          >
            Inserir Texto Manualmente
          </button>

          <!-- Link "Saiba Mais" -->
          <a
            href="#about-section"
            class="underline text-blue-600 hover:text-blue-800"
          >
            Saiba Mais
          </a>
        </div>
      </section>

      <!-- Seção de Editor de Texto Manual -->
      <section
        id="manual-section"
        class="my-8 hidden border border-gray-300 p-4 rounded bg-white"
      >
        <h2 class="text-xl font-semibold mb-4">Editor de Texto Manual</h2>
        <textarea
          id="manualTextArea"
          rows="8"
          class="w-full p-2 border border-gray-300 rounded"
          placeholder="Cole aqui o conteúdo do contrato ou digite manualmente..."
        ></textarea>
        <div class="mt-4">
          <button
            id="analyzeManualBtn"
            class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
          >
            Iniciar Análise
          </button>
        </div>
      </section>

      <!-- Seção de Progresso -->
      <section id="loading-section" class="my-8 hidden">
        <p class="text-center text-lg">
          <span class="animate-pulse">Analisando documento, aguarde...</span>
        </p>
      </section>

      <!-- Seção de Resultados da Análise -->
      <section
        id="results-section"
        class="my-8 hidden border border-gray-300 p-4 rounded bg-white"
      >
        <h2 class="text-xl font-semibold mb-4">Resultados da Análise</h2>
        <div id="analysis-results" class="mb-4 text-sm whitespace-pre-wrap"></div>
        <!-- Botões de ação -->
        <div class="flex flex-col md:flex-row gap-4">
          <button
            id="downloadReportBtn"
            class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
          >
            Baixar Relatório
          </button>
          <button
            id="newAnalysisBtn"
            class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"
          >
            Nova Análise
          </button>
        </div>
      </section>

      <!-- Seção "Saiba Mais" -->
      <section id="about-section" class="my-8 bg-white p-4 rounded">
        <h2 class="text-xl font-semibold mb-2">Como Funciona?</h2>
        <p class="text-sm leading-relaxed">
          Esta aplicação faz análise de documentos (PDF/Word) ou texto digitado
          manualmente, usando a API do ChatGPT para identificar possíveis lacunas
          ou inconsistências em contratos sociais. Basta carregar seu documento ou
          colar o texto do contrato e clicar em "Iniciar Análise".
        </p>
      </section>

    </main>

    <!-- Script Principal -->
    <script src="script.js"></script>
  </body>
</html>
